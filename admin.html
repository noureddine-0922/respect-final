<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© - Respect Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { background-color: #0b0e11; color: white; font-family: 'Cairo', sans-serif; margin: 0; padding: 0; }
        
        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #loginScreen { display: flex; flex-direction: column; justify-content: center; align-items: center; height: 100vh; position: fixed; top: 0; left: 0; width: 100%; background: #0b0e11; z-index: 2000; }
        .login-box { background: #14171a; padding: 40px; border-radius: 16px; border: 1px solid #333; text-align: center; width: 90%; max-width: 400px; }
        .google-btn { background: white; color: #333; font-weight: bold; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 20px; width: 100%; padding: 12px; border-radius: 8px; border: none; cursor: pointer; }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© */
        .admin-wrapper { display: none; display: flex; min-height: 100vh; }
        .sidebar { width: 250px; background: #14171a; padding: 20px; border-left: 1px solid #333; display: flex; flex-direction: column; }
        .sidebar h2 { color: #53fc18; text-align: center; margin-bottom: 30px; }
        .nav-btn { background: transparent; color: #ccc; text-align: right; padding: 15px; margin-bottom: 5px; border-radius: 8px; cursor: pointer; border: none; font-family: 'Cairo'; width: 100%; font-size: 1rem; }
        .nav-btn:hover, .nav-btn.active { background: rgba(83, 252, 24, 0.1); color: #53fc18; font-weight: bold; }
        .nav-btn i { margin-left: 10px; width: 20px; }
        
        .main-content { flex: 1; padding: 30px; overflow-y: auto; }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© */
        input, select, textarea, button { width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px; border: none; font-family: 'Cairo'; box-sizing: border-box; }
        input, select, textarea { background: #1a1d21; color: white; border: 1px solid #333; outline: none; }
        input:focus, textarea:focus { border-color: #53fc18; }
        button.action-btn { background: #53fc18; color: black; font-weight: bold; cursor: pointer; }
        button.delete-btn { background: #ff3333; color: white; width: auto; padding: 5px 15px; cursor: pointer; }
        button.edit-btn { background: #1DA1F2; color: white; width: auto; padding: 5px 15px; cursor: pointer; margin-left: 5px; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø±Ø² */
        .streamer-item { background: #1a1d21; padding: 15px; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border: 1px solid #333; }

        /* ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø³Ø¬Ù„Ø§Øª */
        .log-item { background: #1a1d21; padding: 10px; border-bottom: 1px solid #333; font-size: 0.9rem; color: #ccc; display: flex; justify-content: space-between; }
        .log-time { color: #53fc18; font-size: 0.8rem; }

        /* ØªØ¨ÙˆÙŠØ¨ Ø§Ù„ØµÙŠØ§Ù†Ø© */
        .toggle-container { background: #1a1d21; padding: 20px; border-radius: 10px; border: 1px solid #333; display: flex; justify-content: space-between; align-items: center; }
        .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #53fc18; }
        input:checked + .slider:before { transform: translateX(26px); }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ (Modal) */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 3000; }
        .modal-box { background: #14171a; padding: 20px; border-radius: 10px; width: 90%; max-width: 500px; border: 1px solid #53fc18; }
    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="login-box">
            <h2>ğŸ” Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
            <button class="google-btn" onclick="loginGoogle()">
                <i class="fa-brands fa-google" style="color:#DB4437;"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¬ÙˆØ¬Ù„
            </button>
        </div>
    </div>

    <div class="admin-wrapper" id="adminWrapper" style="display:none;">
        <aside class="sidebar">
            <h2>RESPECT ADMIN</h2>
            <button class="nav-btn active" onclick="showSection('add')"><i class="fa-solid fa-plus"></i> Ø¥Ø¶Ø§ÙØ© ÙØ±Ø¯ÙŠØ©</button>
            <button class="nav-btn" onclick="showSection('manage')"><i class="fa-solid fa-list"></i> Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø±Ø²</button>
            <button class="nav-btn" onclick="showSection('bulk')"><i class="fa-solid fa-layer-group"></i> Ø¥Ø¶Ø§ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©</button>
            <button class="nav-btn" onclick="showSection('settings')"><i class="fa-solid fa-gear"></i> Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©</button>
            <button class="nav-btn" onclick="showSection('logs')"><i class="fa-solid fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª</button>
            <div style="margin-top:auto">
                <button class="nav-btn" onclick="logout()" style="color:#ff3333"><i class="fa-solid fa-sign-out"></i> Ø®Ø±ÙˆØ¬</button>
            </div>
        </aside>

        <main class="main-content">
            <div id="sec-add" class="section active">
                <h3>ğŸ‘‘ Ø¥Ø¶Ø§ÙØ© Ø³ØªØ±ÙŠÙ…Ø± Ø¬Ø¯ÙŠØ¯</h3>
                <input type="text" id="sName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¸Ø§Ù‡Ø±">
                <input type="text" id="sUsername" placeholder="ÙŠÙˆØ²Ø± ÙƒÙŠÙƒ (Username)">
                <input type="text" id="sIcName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ©">
                <input type="text" id="sImage" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
                <select id="sCategory">
                    <option value="police">ğŸ‘®â€â™‚ï¸ Ø§Ù„Ø´Ø±Ø·Ø©</option>
                    <option value="ems">ğŸš‘ Ø§Ù„Ø¥Ø³Ø¹Ø§Ù</option>
                    <option value="citizen">ğŸ§ Ù…ÙˆØ§Ø·Ù†</option>
                    <option value="obeid">ğŸ‘‘ Ø¹Ø§Ø¦Ù„Ø© Ø¹Ø¨ÙŠØ¯</option>
                    <option value="plus">â• Ø§Ù„Ø¨Ù„Ø³</option>
                    <option value="brazil">ğŸ‡§ğŸ‡· Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„ÙŠÙŠÙ†</option>
                    <option value="east">ğŸŒ Ø§Ù„Ø´Ø±Ù‚</option>
                    <option value="west">ğŸ¤  Ø§Ù„ØºØ±Ø¨</option>
                    <option value="nwa">ğŸ¤ N.W.A</option>
                    </select>
                <button class="action-btn" onclick="addStreamer()">Ø¥Ø¶Ø§ÙØ©</button>
            </div>

            <div id="sec-manage" class="section">
                <h3>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø±Ø²</h3>
                <input type="text" id="searchManage" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…..." onkeyup="loadStreamers()">
                <div id="manageList">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
            </div>

            <div id="sec-bulk" class="section">
                <h3>ğŸ“¦ Ø¥Ø¶Ø§ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©</h3>
                <p style="color:#888; font-size:0.9rem;">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„ØªØ§Ù„ÙŠ (ÙƒÙ„ Ø´Ø®Øµ ÙÙŠ Ø³Ø·Ø±):<br>
                <code>Ø§Ù„Ø§Ø³Ù…, Ø§Ù„ÙŠÙˆØ²Ø±, Ø§Ù„ÙØ¦Ø©, Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©</code></p>
                <textarea id="bulkInput" rows="10" placeholder="Ù…Ø«Ø§Ù„:
S5B, s5b, police, https://image.com/1.png
Ù…ÙˆØ¯ÙŠ, moody, ems, https://image.com/2.png"></textarea>
                <button class="action-btn" onclick="bulkAddStreamers()">Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</button>
            </div>

            <div id="sec-settings" class="section">
                <h3>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹</h3>
                <div class="toggle-container">
                    <div>
                        <strong>ÙˆØ¶Ø¹ Ø§Ù„ØµÙŠØ§Ù†Ø© (Maintenance Mode)</strong><br>
                        <small style="color:#888;">Ø¹Ù†Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ØŒ Ø³ÙŠØ¸Ù‡Ø± Ù„Ù„Ø²ÙˆØ§Ø± ØµÙØ­Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØµÙŠØ§Ù†Ø©" ÙˆÙ„Ù† ÙŠØ¹Ù…Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹.</small>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="maintenanceToggle" onchange="toggleMaintenance()">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <div id="sec-logs" class="section">
                <h3>ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª (Ø¢Ø®Ø± 50 Ø¹Ù…Ù„ÙŠØ©)</h3>
                <div id="logsList">Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø³Ø¬Ù„Ø§Øª...</div>
            </div>
        </main>
    </div>

    <div class="modal-overlay" id="editModal">
        <div class="modal-box">
            <h3>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
            <input type="hidden" id="editId">
            <input type="text" id="editName" placeholder="Ø§Ù„Ø§Ø³Ù…">
            <input type="text" id="editUsername" placeholder="Ø§Ù„ÙŠÙˆØ²Ø±">
            <input type="text" id="editIcName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø´Ø®ØµÙŠØ©">
            <input type="text" id="editImage" placeholder="Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©">
            <select id="editCategory">
                <option value="police">ğŸ‘®â€â™‚ï¸ Ø§Ù„Ø´Ø±Ø·Ø©</option>
                <option value="ems">ğŸš‘ Ø§Ù„Ø¥Ø³Ø¹Ø§Ù</option>
                <option value="citizen">ğŸ§ Ù…ÙˆØ§Ø·Ù†</option>
                <option value="obeid">ğŸ‘‘ Ø¹Ø§Ø¦Ù„Ø© Ø¹Ø¨ÙŠØ¯</option>
                <option value="plus">â• Ø§Ù„Ø¨Ù„Ø³</option>
                </select>
            <button class="action-btn" onclick="saveEdit()">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
            <button class="delete-btn" onclick="closeEdit()" style="background:#555; width:100%; margin-top:10px;">Ø¥Ù„ØºØ§Ø¡</button>
        </div>
    </div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, updateDoc, doc, setDoc, getDoc, query, orderBy, limit, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBjEc-wdY6s6v0AiVg4texFrohLwDcdaiU",
        authDomain: "respect-db-d1320.firebaseapp.com",
        projectId: "respect-db-d1320", 
        storageBucket: "respect-db-d1320.firebasestorage.app",
        messagingSenderId: "823436634480",
        appId: "1:823436634480:web:3380974cce87d8e82b07b5"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();
    let currentUserEmail = "";

    // --- Ø§Ù„ØªÙˆØ«ÙŠÙ‚ ---
    onAuthStateChanged(auth, (user) => {
        if (user) {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('adminWrapper').style.display = 'flex';
            currentUserEmail = user.email;
            checkMaintenanceStatus(); // Ø¬Ù„Ø¨ Ø­Ø§Ù„Ø© Ø§Ù„ØµÙŠØ§Ù†Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            loadLogs(); // Ø¬Ù„Ø¨ Ø§Ù„Ø³Ø¬Ù„Ø§Øª
        } else {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('adminWrapper').style.display = 'none';
        }
    });

    window.loginGoogle = () => signInWithPopup(auth, provider);
    window.logout = () => signOut(auth).then(() => location.reload());

    // --- Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª ---
    window.showSection = (secId) => {
        document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(el => el.classList.remove('active'));
        document.getElementById(`sec-${secId}`).classList.add('active');
        event.currentTarget.classList.add('active');
        if(secId === 'manage') loadStreamers();
        if(secId === 'logs') loadLogs();
    };

    // --- 1. Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª (Logger) ---
    async function logActivity(action, details) {
        try {
            await addDoc(collection(db, "logs"), {
                action: action,
                details: details,
                user: currentUserEmail,
                timestamp: serverTimestamp()
            });
        } catch(e) { console.error("Log error", e); }
    }

    async function loadLogs() {
        const list = document.getElementById('logsList');
        list.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
        try {
            const q = query(collection(db, "logs"), orderBy("timestamp", "desc"), limit(50));
            const snapshot = await getDocs(q);
            list.innerHTML = "";
            snapshot.forEach(doc => {
                const d = doc.data();
                const time = d.timestamp ? new Date(d.timestamp.toDate()).toLocaleString() : "Ø§Ù„Ø¢Ù†";
                list.innerHTML += `
                    <div class="log-item">
                        <div><strong style="color:#53fc18">[${d.action}]</strong> ${d.details}<br><small>Ø¨ÙˆØ§Ø³Ø·Ø©: ${d.user}</small></div>
                        <div class="log-time">${time}</div>
                    </div>`;
            });
        } catch(e) { list.innerHTML = "Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø³Ø¬Ù„Ø§Øª"; }
    }

    // --- 2. Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØ±Ø¯ÙŠØ© ---
    window.addStreamer = async () => {
        const data = {
            name: document.getElementById('sName').value,
            username: document.getElementById('sUsername').value,
            icName: document.getElementById('sIcName').value,
            image: document.getElementById('sImage').value,
            category: document.getElementById('sCategory').value
        };
        if(!data.username) return alert("Ø§Ù„ÙŠÙˆØ²Ø± Ù…Ø·Ù„ÙˆØ¨");
        await addDoc(collection(db, "streamers"), data);
        await logActivity("Ø¥Ø¶Ø§ÙØ©", `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${data.name}`);
        alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©");
        // ØªÙØ±ÙŠØº Ø§Ù„Ø­Ù‚ÙˆÙ„...
    };

    // --- 3. Ø¥Ø¯Ø§Ø±Ø© (ØªØ¹Ø¯ÙŠÙ„ ÙˆØ­Ø°Ù) ---
    window.loadStreamers = async () => {
        const search = document.getElementById('searchManage').value.toLowerCase();
        const list = document.getElementById('manageList');
        list.innerHTML = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...";
        const snapshot = await getDocs(collection(db, "streamers"));
        list.innerHTML = "";
        snapshot.forEach(docSnap => {
            const d = docSnap.data();
            if(d.name.toLowerCase().includes(search) || d.username.includes(search)) {
                // Ù†Ù…Ø±Ø± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒÙ€ Ù†Øµ Ù…Ø´ÙØ± Ø¹Ø´Ø§Ù† Ù…Ø§ ÙŠØ®Ø±Ø¨ Ø§Ù„Ù€ HTML
                const dataString = encodeURIComponent(JSON.stringify({id: docSnap.id, ...d}));
                list.innerHTML += `
                    <div class="streamer-item">
                        <span>${d.name} (${d.username})</span>
                        <div>
                            <button class="edit-btn" onclick="openEdit('${dataString}')">ØªØ¹Ø¯ÙŠÙ„</button>
                            <button class="delete-btn" onclick="deleteItem('${docSnap.id}', '${d.name}')">Ø­Ø°Ù</button>
                        </div>
                    </div>`;
            }
        });
    };

    // ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ¹Ø¯ÙŠÙ„
    window.openEdit = (dataStr) => {
        const data = JSON.parse(decodeURIComponent(dataStr));
        document.getElementById('editId').value = data.id;
        document.getElementById('editName').value = data.name;
        document.getElementById('editUsername').value = data.username;
        document.getElementById('editIcName').value = data.icName;
        document.getElementById('editImage').value = data.image;
        document.getElementById('editCategory').value = data.category;
        document.getElementById('editModal').style.display = 'flex';
    };

    window.closeEdit = () => document.getElementById('editModal').style.display = 'none';

    window.saveEdit = async () => {
        const id = document.getElementById('editId').value;
        const newData = {
            name: document.getElementById('editName').value,
            username: document.getElementById('editUsername').value,
            icName: document.getElementById('editIcName').value,
            image: document.getElementById('editImage').value,
            category: document.getElementById('editCategory').value
        };
        await updateDoc(doc(db, "streamers", id), newData);
        await logActivity("ØªØ¹Ø¯ÙŠÙ„", `ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ${newData.name}`);
        closeEdit();
        loadStreamers();
        alert("ØªÙ… Ø§Ù„Ø­ÙØ¸!");
    };

    window.deleteItem = async (id, name) => {
        if(confirm("Ø­Ø°ÙØŸ")) {
            await deleteDoc(doc(db, "streamers", id));
            await logActivity("Ø­Ø°Ù", `Ø­Ø°Ù Ø§Ù„Ø³ØªØ±ÙŠÙ…Ø± ${name}`);
            loadStreamers();
        }
    };

    // --- 4. Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ© ---
    window.bulkAddStreamers = async () => {
        const text = document.getElementById('bulkInput').value;
        const lines = text.split('\n');
        let count = 0;
        
        for(let line of lines) {
            const parts = line.split(',');
            if(parts.length >= 3) {
                const name = parts[0].trim();
                const username = parts[1].trim();
                const category = parts[2].trim();
                const image = parts[3] ? parts[3].trim() : "https://via.placeholder.com/150";
                
                await addDoc(collection(db, "streamers"), { name, username, category, image, icName: name });
                count++;
            }
        }
        await logActivity("Ø¥Ø¶Ø§ÙØ© Ø¬Ù…Ø§Ø¹ÙŠØ©", `ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${count} Ø³ØªØ±ÙŠÙ…Ø±`);
        alert(`ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© ${count} Ø¨Ù†Ø¬Ø§Ø­!`);
        document.getElementById('bulkInput').value = "";
    };

    // --- 5. ÙˆØ¶Ø¹ Ø§Ù„ØµÙŠØ§Ù†Ø© ---
    // Ù†Ø³ØªØ®Ø¯Ù… Ù…Ø³ØªÙ†Ø¯ Ø®Ø§Øµ Ø§Ø³Ù…Ù‡ settings/config
    window.checkMaintenanceStatus = async () => {
        try {
            const docSnap = await getDoc(doc(db, "settings", "config"));
            if (docSnap.exists()) {
                document.getElementById('maintenanceToggle').checked = docSnap.data().maintenance;
            }
        } catch(e) { console.log("Settings not initialized yet"); }
    };

    window.toggleMaintenance = async () => {
        const status = document.getElementById('maintenanceToggle').checked;
        await setDoc(doc(db, "settings", "config"), { maintenance: status }, { merge: true });
        await logActivity("ØµÙŠØ§Ù†Ø©", `ØªØºÙŠÙŠØ± ÙˆØ¶Ø¹ Ø§Ù„ØµÙŠØ§Ù†Ø© Ø¥Ù„Ù‰: ${status ? "Ù…ÙØ¹Ù„" : "Ù…Ø¹Ø·Ù„"}`);
    };

</script>
</body>
</html>

